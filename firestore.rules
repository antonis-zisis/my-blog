rules_version = '2';

service cloud.firestore {
  match /databases/{database}/documents {

    match /posts/{slug} {
      // public reads for published posts only
      allow read: if resource != null && resource.data.published == true;

      // writes only for the authenticated blog owner
      allow write: if request.auth != null && request.auth.uid == "7xjkwrLd6tNJkpBhTdtdHepx2Eb2";
    }

    // deny everything else
    match /{document=**} {
      allow read, write: if false;
    }
  }
}
